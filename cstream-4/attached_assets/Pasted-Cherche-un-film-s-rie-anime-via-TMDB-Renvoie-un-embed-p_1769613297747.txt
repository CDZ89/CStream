Cherche un film / sÃ©rie / anime via TMDB

Renvoie un embed propre

Avec un bouton cliquable qui redirige vers ton site CStream

Compatible avec discord.js  v14

Ultra simple Ã  connecter Ã  ton backend si tu veux plus tard

Aucune dÃ©pendance bizarre, juste TMDB + ton site.

âœ… 1. DÃ©claration de la commande /search
Ã€ mettre dans ton fichier de commandes (ex: commands/search.js) :

js
const { SlashCommandBuilder, EmbedBuilder, ActionRowBuilder, ButtonBuilder, ButtonStyle } = require('discord.js');
const axios = require('axios');

module.exports = {
  data: new SlashCommandBuilder()
    .setName('search')
    .setDescription('Rechercher un film, une sÃ©rie ou un anime via TMDB')
    .addStringOption(option =>
      option.setName('query')
        .setDescription('Nom du film, sÃ©rie ou anime')
        .setRequired(true)
    )
    .addStringOption(option =>
      option.setName('type')
        .setDescription('Type de mÃ©dia')
        .setRequired(true)
        .addChoices(
          { name: 'Film', value: 'movie' },
          { name: 'SÃ©rie', value: 'tv' },
          { name: 'Anime', value: 'anime' }
        )
    ),

  async execute(interaction) {
    const query = interaction.options.getString('query');
    const type = interaction.options.getString('type');

    await interaction.deferReply();

    try {
      const tmdbType = type === 'anime' ? 'tv' : type;

      const url = `https://api.themoviedb.org/3/search/${tmdbType}?api_key=${process.env.TMDB_KEY}&query=${encodeURIComponent(query)}&language=fr-FR`;

      const response = await axios.get(url);
      const results = response.data.results;

      if (!results || results.length === 0) {
        return interaction.editReply(`âŒ Aucun rÃ©sultat trouvÃ© pour **${query}**`);
      }

      const media = results[0];

      const title = media.title || media.name;
      const poster = media.poster_path
        ? `https://image.tmdb.org/t/p/w500${media.poster_path}`
        : null;

      const cstreamUrl = `https://ton-site.com/watch/${type}/${media.id}`;

      const embed = new EmbedBuilder()
        .setTitle(title)
        .setDescription(`ğŸ¬ Cliquez sur le bouton ciâ€‘dessous pour regarder sur **CStream**`)
        .setColor('#5865F2')
        .setImage(poster)
        .setFooter({ text: 'Powered by TMDB â€¢ CStream' });

      const row = new ActionRowBuilder().addComponents(
        new ButtonBuilder()
          .setLabel('Regarder sur CStream')
          .setStyle(ButtonStyle.Link)
          .setURL(cstreamUrl)
      );

      return interaction.editReply({ embeds: [embed], components: [row] });

    } catch (err) {
      console.error(err);
      return interaction.editReply('âŒ Une erreur est survenue lors de la recherche.');
    }
  }
};
ğŸ”¥ 2. Ce que cette commande fait exactement
âœ” Recherche TMDB
Films

SÃ©ries

Anime (redirigÃ© vers TMDB TV car TMDB nâ€™a pas de catÃ©gorie â€œanimeâ€)

âœ” Renvoie un embed premium
Titre

Image

Description

Footer propre

âœ” Bouton cliquable
Le bouton envoie vers :

Code
https://ton-site.com/watch/{type}/{id}
Tu remplaces ton-site.com par ton domaine.

âœ” Ultra rapide
RÃ©ponse en moins dâ€™une seconde.

ğŸ§© 3. Variables nÃ©cessaires
Dans ton .env :

Code
TMDB_KEY=ta_clef_tmdb
ğŸš€ 4. Si tu veux, je peux aussi te faire :
/search advanced â†’ plusieurs rÃ©sultats + pagination

/random â†’ film/sÃ©rie/anime alÃ©atoire

/trending â†’ tendances TMDB

/actor â†’ recherche dâ€™acteurs

/watch â†’ ouvrir directement un ID CStream

/anime â†’ recherche spÃ©cialisÃ©e anime (Anilist + TMDB mix)