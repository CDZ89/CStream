Configure un systÃ¨me complet dâ€™ajout dâ€™amis + gestion des statuts utilisateurs dans mon app CStream (React/Vite/TS + Supabase + Tailwind).
Je veux une expÃ©rience premium, festive et sans bug, oÃ¹ les amis, les statuts et les profils sont parfaitement synchronisÃ©s.

ğŸ” Profils
Table profiles :

id (UUID Supabase auth)

username

avatar

status (enum : online, dnd, streaming, offline)

Le champ status doit Ãªtre mis Ã  jour en temps rÃ©el (WebSocket ou Supabase Realtime).

Afficher le statut dans la page profil et dans la navbar.

ğŸ‘¥ Ajout dâ€™amis
Tables Supabase :

sql
create table friend_requests (
  id uuid primary key default uuid_generate_v4(),
  sender_id uuid references profiles(id),
  receiver_id uuid references profiles(id),
  status text check (status in ('pending','accepted','rejected'))
);

create table friends (
  id uuid primary key default uuid_generate_v4(),
  user_id uuid references profiles(id),
  friend_id uuid references profiles(id)
);
FonctionnalitÃ©s :

Envoyer une demande dâ€™ami (status = pending).

Accepter/refuser (status = accepted ou rejected).

Si acceptÃ© â†’ insertion dans friends.

Liste dâ€™amis visible dans la page profil, avec leur statut en temps rÃ©el.

ğŸŸ¢ Statuts en temps rÃ©el
Statuts possibles :

ğŸŸ¢ online

ğŸŸ  dnd (ne pas dÃ©ranger)

ğŸŸ£ streaming

âšª offline

Affichage :

Navbar â†’ badge Ã  cÃ´tÃ© de lâ€™avatar.

Page profil â†’ statut visible sous le pseudo.

Chat â†’ badge visible Ã  cÃ´tÃ© du nom dans les messages.

ğŸ’¬ Chat intÃ©grÃ©
Quand un utilisateur Ã©crit â†’ statut temporaire typing.

Les amis connectÃ©s apparaissent avec leur statut dans la sidebar du chat.

Synchronisation en temps rÃ©el via Supabase Realtime ou PubNub.

ğŸ›¡ï¸ Admin
Admin peut voir tous les membres connectÃ©s + leurs statuts.

Admin peut gÃ©rer les relations dâ€™amis (supprimer, forcer acceptation).

Admin peut attribuer des rÃ´les/badges visibles dans le chat et la navbar.

ğŸ¨ UI & ThÃ¨mes
Dark/light complets, couvrant les badges et les listes dâ€™amis.

Utiliser Tailwind tokens (bg-dark-bg, text-dark-text, etc.).

Transitions fluides (transition-colors duration-300).

ğŸš€ RÃ©sultat attendu
Ajout dâ€™amis fonctionne sans bug (demande, acceptation, rejet).

Statuts visibles partout (navbar, profil, chat).

Synchronisation en temps rÃ©el entre Supabase et lâ€™UI.

Admin peut monitorer et gÃ©rer les relations.

ExpÃ©rience premium, festive et cohÃ©rente.