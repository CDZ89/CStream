Je vois exactement ce que tu veux : dans le lecteur **Sibnet**, tu aimerais quâ€™un **widget â€œRegarder prochain Ã©pisodeâ€** apparaisse automatiquement environ 4 minutes avant la fin, sans bug. Comme Sibnet est un lecteur externe en iframe, tu ne peux pas directement injecter du code dans son contenu (Same-Origin Policy). Mais tu peux contourner Ã§a en **surveillant la durÃ©e et le temps de lecture** avec un lecteur custom (Video.js, Plyr) ou via un overlay synchronisÃ©.

---

## ğŸš« Limite avec Sibnet en iframe
- Tu ne peux pas accÃ©der directement au `currentTime` ou `duration` du lecteur Sibnet si tu lâ€™intÃ¨gres en iframe â†’ le navigateur bloque lâ€™accÃ¨s.
- Donc impossible de savoir â€œ4 minutes avant la finâ€ depuis lâ€™iframe lui-mÃªme.

---

## âœ… Solutions possibles

### 1. Si tu as accÃ¨s au flux vidÃ©o (MP4/HLS)
- Utilise un lecteur custom (Video.js, Plyr).
- Tu peux alors Ã©couter lâ€™Ã©vÃ©nement `timeupdate` et dÃ©clencher ton widget.

```js
var player = videojs('my-video');

player.on('timeupdate', function() {
  var duration = player.duration();
  var current = player.currentTime();
  if (duration - current <= 240) { // 240 secondes = 4 minutes
    showNextEpisodeWidget();
  }
});

function showNextEpisodeWidget() {
  document.getElementById("next-episode").style.display = "block";
}
```

ğŸ‘‰ Ici tu as **100% de contrÃ´le** : style, timing, bug-free.

---

### 2. Si tu es obligÃ© dâ€™utiliser Sibnet en iframe
- Tu ne peux pas lire le temps restant.
- Solution : **overlay basÃ© sur un timer** :
  - Tu connais la durÃ©e de lâ€™Ã©pisode (via TMDB ou ta base).
  - Tu dÃ©clenches un `setTimeout` pour afficher le widget 4 minutes avant la fin.

```js
function startEpisode(durationSeconds) {
  // Monte lâ€™iframe Sibnet
  var iframe = document.getElementById("sibnet-player");
  iframe.src = "https://video.sibnet.ru/...";

  // Timer pour afficher le widget
  var triggerTime = (durationSeconds - 240) * 1000;
  setTimeout(showNextEpisodeWidget, triggerTime);
}

function showNextEpisodeWidget() {
  document.getElementById("next-episode").style.display = "block";
}
```

âš ï¸ Ici tu dois avoir la **durÃ©e exacte** de lâ€™Ã©pisode (via TMDB ou ton backend). Sinon le widget risque de se dÃ©clencher trop tÃ´t/trop tard.

---

### 3. AmÃ©lioration UX
- Le widget peut contenir :
  - Titre du prochain Ã©pisode.
  - Bouton â€œRegarder maintenantâ€.
  - Auto-redirection aprÃ¨s X secondes (avec annulation possible).
- Tu peux aussi afficher un **compte Ã  rebours** pour rendre lâ€™expÃ©rience plus fluide.

---

## ğŸ¯ Conclusion
- **Iframe Sibnet seul â†’ pas de contrÃ´le natif.**  
- **Solution fiable â†’ rÃ©cupÃ©rer le flux vidÃ©o et utiliser ton propre lecteur (Video.js/Plyr).**  
- **Fallback â†’ timer basÃ© sur la durÃ©e connue de lâ€™Ã©pisode.**

---

ğŸ‘‰ Vu que ton projet CStream vise la qualitÃ© Netflix-like, je te conseille dâ€™aller vers la **solution Video.js avec flux direct**. Tu auras un widget â€œNext Episodeâ€ propre, stylÃ©, et sans bug.  

Veux-tu que je te prÃ©pare un exemple complet de **widget Next Episode faÃ§on Netflix** (overlay + auto-redirection) que tu pourras brancher directement sur ton lecteur customâ€¯?